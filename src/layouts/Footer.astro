---
import { getCollection } from "astro:content";
import {
  getLangFromUrl,
  useTranslatedPath,
  useTranslations,
} from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);
const homeUrl = lang === "fr" ? `/${lang}` : "/";

const services = (await getCollection("services"))
  .filter(({ slug }) => slug.startsWith(`${lang}/`))
  .map((item) => ({
    ...item,
    slug: (() => {
      const [_, ...slug] = item.slug.split("/");
      return '/' + (lang !== "en" ? `${lang}/` : "") + "services/" + slug.join("/");
    })(),
  }));
---

<footer
  class:list={[
    "py-14",
    "bg-slate-100",
    "border-t",
    "border-slate-100",
    "dark:text-white",
    "dark:bg-slate-950",
    "dark:border-slate-700/50",
  ]}
>
  <div class:list={["max-w-screen-lg", "mx-auto", "px-5"]}>
    <div
      class:list={[
        "grid",
        "sm:grid-cols-2",
        "md:grid-cols-3",
        "lg:grid-cols-5",
        "gap-8",
      ]}
    >
      <div class:list={["sm:col-span-2", "md:col-span-3", "lg:col-span-2"]}>
        <a
          href={homeUrl}
          class:list={[
            "grid",
            "grid-flow-col",
            "items-center",
            "gap-2",
            "w-fit",
          ]}
        >
          <span class:list={["text-4xl", "font-['Jersey_15']"]}>k11e</span>
          <small
            class:list={[
              "h-100",
              "font-['Kalam']",
              "pl-2",
              "pt-2",
              "leading-[80%]",
            ]}
          >
            <p>/ Keven Lefebvre</p>
            <p class:list={["pl-2", "text-[60%]"]}>{t("nav.title")}</p>
          </small>
        </a>
        <p
          class:list={[
            "mt-4",
            "text-sm",
            "text-slate-700",
            "max-w-xs",
            "dark:text-slate-300",
          ]}
        >
          {t("site.meta.description")}
        </p>
        <div class:list={["flex", "gap-3", "mt-4", "items-center"]}>
          <a
            href="https://bsky.app/profile/k11e.com"
            target="_blank"
            rel="noopener noreferrer"
            class:list={[
              "bg-slate-200",
              "hover:bg-slate-300",
              "rounded",
              "w-6",
              "h-6",
              "inline-flex",
              "items-center",
              "justify-center",
              "text-slate-500",
            ]}
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512"
              width="1em"
              height="1em"
              class:list={["w-3.5", "h-3.5"]}
              ><path
                d="M111.8 62.2C170.2 105.9 233 194.7 256 242.4c23-47.6 85.8-136.4 144.2-180.2c42.1-31.6 110.3-56 110.3 21.8c0 15.5-8.9 130.5-14.1 149.2C478.2 298 412 314.6 353.1 304.5c102.9 17.5 129.1 75.5 72.5 133.5c-107.4 110.2-154.3-27.6-166.3-62.9l0 0c-1.7-4.9-2.6-7.8-3.3-7.8s-1.6 3-3.3 7.8l0 0c-12 35.3-59 173.1-166.3 62.9c-56.5-58-30.4-116 72.5-133.5C100 314.6 33.8 298 15.7 233.1C10.4 214.4 1.5 99.4 1.5 83.9c0-77.8 68.2-53.4 110.3-21.8z"
                fill="currentColor"></path></svg
            >
            <span class="sr-only">BlueSky</span></a
          >
          <a
            href="https://linkedin.com/in/kevenl"
            target="_blank"
            rel="noopener noreferrer"
            class:list={[
              "bg-slate-200",
              "hover:bg-slate-300",
              "rounded",
              "w-6",
              "h-6",
              "inline-flex",
              "items-center",
              "justify-center",
              "text-slate-500",
            ]}
          >
            <svg
              width="1em"
              height="1em"
              viewBox="0 0 24 24"
              class:list={["w-4", "h-4"]}
            >
              <path
                d="M20 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM8.339 18.337H5.667v-8.59h2.672v8.59zM7.003 8.574a1.548 1.548 0 1 1 0-3.096a1.548 1.548 0 0 1 0 3.096zm11.335 9.763h-2.669V14.16c0-.996-.018-2.277-1.388-2.277c-1.39 0-1.601 1.086-1.601 2.207v4.248h-2.667v-8.59h2.56v1.174h.037c.355-.675 1.227-1.387 2.524-1.387c2.704 0 3.203 1.778 3.203 4.092v4.71z"
                fill="currentColor"></path>
            </svg><span class="sr-only">Linkedin</span></a
          ><a
            href="https://github.com/orditeck"
            target="_blank"
            rel="noopener noreferrer"
            class:list={[
              "bg-slate-200",
              "hover:bg-slate-300",
              "rounded",
              "w-6",
              "h-6",
              "inline-flex",
              "items-center",
              "justify-center",
              "text-slate-500",
            ]}
          >
            <svg
              width="1em"
              height="1em"
              viewBox="0 0 24 24"
              class:list={["w-4", "h-4"]}
            >
              <path
                fill-rule="evenodd"
                d="M12.006 2a9.847 9.847 0 0 0-6.484 2.44 10.32 10.32 0 0 0-3.393 6.17 10.48 10.48 0 0 0 1.317 6.955 10.045 10.045 0 0 0 5.4 4.418c.504.095.683-.223.683-.494 0-.245-.01-1.052-.014-1.908-2.78.62-3.366-1.21-3.366-1.21a2.711 2.711 0 0 0-1.11-1.5c-.907-.637.07-.621.07-.621.317.044.62.163.885.346.266.183.487.426.647.71.135.253.318.476.538.655a2.079 2.079 0 0 0 2.37.196c.045-.52.27-1.006.635-1.37-2.219-.259-4.554-1.138-4.554-5.07a4.022 4.022 0 0 1 1.031-2.75 3.77 3.77 0 0 1 .096-2.713s.839-.275 2.749 1.05a9.26 9.26 0 0 1 5.004 0c1.906-1.325 2.74-1.05 2.74-1.05.37.858.406 1.828.101 2.713a4.017 4.017 0 0 1 1.029 2.75c0 3.939-2.339 4.805-4.564 5.058a2.471 2.471 0 0 1 .679 1.897c0 1.372-.012 2.477-.012 2.814 0 .272.18.592.687.492a10.05 10.05 0 0 0 5.388-4.421 10.473 10.473 0 0 0 1.313-6.948 10.32 10.32 0 0 0-3.39-6.165A9.847 9.847 0 0 0 12.007 2Z"
                clip-rule="evenodd"
                fill="currentColor"></path>
            </svg>
            <span class="sr-only">GitHub</span></a
          >
        </div>
        <p
          class:list={[
            "mt-4",
            "text-xs",
            "text-slate-700",
            "dark:text-slate-300",
          ]}
        >
          Copyright Â© {new Date().getFullYear()} k11e. {
            t("footer.allRightsReserved")
          }
        </p>
      </div>
      <div>
        <h3
          class:list={[
            "font-medium",
            "text-sm",
            "text-slate-800",
            "dark:text-slate-300",
          ]}
        >
          k11e
        </h3>
        <div class:list={["flex", "flex-col", "mt-3"]}>
          <a
            href={translatePath("about-me")}
            class:list={[
              "py-2",
              "text-sm",
              "text-slate-600",
              "hover:text-indigo-600",
              "dark:text-slate-300",
              "dark:hover:text-indigo-600",
            ]}
          >
            {t("nav.about")}
          </a><a
            href={translatePath("contact")}
            class:list={[
              "py-2",
              "text-sm",
              "text-slate-600",
              "hover:text-indigo-600",
              "dark:text-slate-300",
              "dark:hover:text-indigo-600",
            ]}
          >
            {t("nav.contact")}
          </a><a
            href="https://garden.nevek.co/readme/"
            target="_blank"
            rel="noopener noreferrer"
            class:list={[
              "py-2",
              "text-sm",
              "text-slate-600",
              "hover:text-indigo-600",
              "dark:text-slate-300",
              "dark:hover:text-indigo-600",
            ]}
          >
            2nd Brain
          </a>
        </div>
      </div>
      <div>
        <h3
          class:list={[
            "font-medium",
            "text-sm",
            "text-slate-800",
            "dark:text-slate-300",
          ]}
        >
          {t("nav.services")}
        </h3>
        <div class:list={["flex", "flex-col", "mt-3"]}>
          {
            services.map((service) => (
              <a
                href={service.slug}
                class:list={[
                  "py-2",
                  "text-sm",
                  "text-slate-600",
                  "hover:text-indigo-600",
                  "dark:text-slate-300",
                  "dark:hover:text-indigo-600",
                ]}
              >
                {service.data.marketingTitle}
              </a>
            ))
          }
        </div>
      </div>
      <div>
        <h3
          class:list={[
            "font-medium",
            "text-sm",
            "text-slate-800",
            "dark:text-slate-300",
          ]}
        >
          {t("nav.resources")}
        </h3>
        <div class:list={["flex", "flex-col", "mt-3"]}>
          <a
            href="https://github.com/orditeck"
            target="_blank"
            rel="noopener noreferrer"
            class:list={[
              "py-2",
              "text-sm",
              "text-slate-600",
              "hover:text-indigo-600",
              "dark:text-slate-300",
              "dark:hover:text-indigo-600",
            ]}
          >
            GitHub
          </a><a
            href="https://github.com/orditeck/k11e"
            target="_blank"
            rel="noopener noreferrer"
            class:list={[
              "py-2",
              "text-sm",
              "text-slate-600",
              "hover:text-indigo-600",
              "dark:text-slate-300",
              "dark:hover:text-indigo-600",
            ]}
          >
            Sources
          </a>
        </div>
      </div>
    </div>
  </div>
</footer>
